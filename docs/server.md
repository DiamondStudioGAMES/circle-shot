# Сервер игры

В этом документе описана структура сервера, с которого загружаются данные для игры, и файлов на нём.

## Определение сервера

Адрес для сервера по умолчанию - `https://diamondstudiogames.github.io/circle-shot` - записан в `Main.SERVER_URL`. Если Вы хотите поменять этот адрес, то просто отредактируйте константу.

## Файлы на сервере

- `check.txt`: файл, который должен содержать в себе лишь 1 слово: *circleshot*. Используется для проверки подключения к серверу и опознавания, что это именно сервер с данными для Circle Shot.
- `data.cfg`: файл, который игра скачивает при каждом запуске. Содержит самую разную информацию (см. ниже). При успешной загрузке этого файла с сервера доступ к нему можно получить через `Globals.data_file`. Иначе же это свойство будет равно `null` (помните это, прежде чем обращаться к нему!).
- `patches`: папка, в которой находятся последние версии патчей с именем `<версия для патчинга>.pck`.

## Структура `data.cfg`

Макет файла:
```ini
[versions]

stable="<стабильная версия>"
beta="<бета-версия>"

[patches]
<версия для патчинга>=<код последнего патча>
...
```

Разберём каждую секцию по отдельности.

### `versions`

Содержит всего два значения - `stable` со стабильной версией игры и `beta` с нестабильной. Используется при проверке наличие обновлений.  
**Внимание**: если стабильная версия выше нестабильной (например, релиз `2.1.0` когда как последняя бета - `2.1.0.22`), то установите значение `beta` *равным* значению `stable`. Это необходимо для правильной проверки обновлений.

### `patches`

Содержит список значений, где ключи - названия версий (например, `2.2.0.01`), а значение - номер патча (начинается с 1). Каждый раз, когда выпускается новый патч для одной версии, его номер должен повышаться на 1.

TODO: офферы в магазине
